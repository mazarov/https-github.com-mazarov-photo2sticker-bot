# План настройки для верификации поддержкой Dockhost

Ниже — пошаговый план. Прошу проверить: всё ли верно, и в каком разделе панели выполнять шаг 2 (разрешение трафика между проектами).

---

**Цель:** приложение (API + Worker) в проекте А должно обращаться к Supabase (БД и Storage) в проекте Б. Supabase доступен через Kong (сервис supabase-kong, порт 80). Внутренний IP Kong в проекте Б: **10.177.250.48**.

---

**Шаг 1.** В проекте с Supabase узнать внутренний IP сервиса **supabase-kong** (порт 80).  
*(Сделано: 10.177.250.48.)*

**Шаг 2.** Разрешить трафик между проектами: проект с приложением (бот) → проект с Supabase.  
Вы писали: «Настройки / DNS и сеть». Подскажите, пожалуйста: в каком именно разделе панели это настраивается (полный путь: например «Проект → Настройки → …») и какие действия выполнить (кнопки, выбор проекта и т.д.). Без этого контейнеры из проекта с ботом не достучатся до 10.177.250.48.

**Шаг 3.** (Опционально.) В разделе DNS и сеть — можно ли задать DNS-имя на этот IP (чтобы в env указывать имя вместо IP)? Если да — как это сделать?

**Шаг 4.** В проекте с ботом (проект А) переменные уже есть: `SUPABASE_SUPABASE_PUBLIC_URL`, `SUPABASE_SERVICE_ROLE_KEY`, `SUPABASE_STORAGE_BUCKET`. При необходимости поменять значение `SUPABASE_SUPABASE_PUBLIC_URL` на `http://10.177.250.48:80` (внутренний IP Kong), если текущий URL (например домен dockhost.net) даёт ошибки при обращении к Storage. Service role key должен быть от того же Supabase (проект Б).

**Шаг 5.** В проекте с ботом (проект А) перезапустить контейнеры, которые ходят в Supabase: **API** и **Worker**. (Для тестовой среды — те же контейнеры тестового окружения.) После перезапуска проверить логи и обращение к БД и Storage через Kong.

---

Вопрос: для доступа к админке MinIO (порт 9001) нужны отдельные домен и маршрут — это верно? Бакеты (stickers, stickers-examples) планируем создавать через MinIO или через API Supabase после того, как связь заработает.

Спасибо.

# AI Pack Ideas ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–¥–µ–π –¥–ª—è —Å—Ç–∏–∫–µ—Ä–ø–∞–∫–∞

**–î–∞—Ç–∞:** 2026-02-11
**–°—Ç–∞—Ç—É—Å:** –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∏–∫–µ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ. –°—Ç–∏–∫–µ—Ä–ø–∞–∫ –∏–∑ 1-2 —à—Ç—É–∫ ‚Äî –Ω–µ –ø–∞–∫. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–µ–ª–∞—é—Ç 1-2 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —É—Ö–æ–¥—è—Ç.

## –†–µ—à–µ–Ω–∏–µ

–ö–Ω–æ–ø–∫–∞ **"üí° –ò–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞"** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–∏–∫–µ—Ä –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç 8-10 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–¥–µ–π –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å—Ç–∏–∫–µ—Ä–æ–≤ –≤ —Ç–æ–º –∂–µ —Å—Ç–∏–ª–µ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–∏—Å—Ç–∞–µ—Ç –∏–¥–µ–∏ –ø–æ –æ–¥–Ω–æ–π –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–°–≥–µ–Ω–µ—Ä–∏—Ç—å" ‚Äî –æ–¥–∏–Ω –∫–ª–∏–∫.

## –ë–∏–∑–Ω–µ—Å-—ç—Ñ—Ñ–µ–∫—Ç

- –í–º–µ—Å—Ç–æ 1-2 –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –∑–∞ —Å–µ—Å—Å–∏—é ‚Üí 5-10 = **x3-5 —Ä–∞—Å—Ö–æ–¥ –∫—Ä–µ–¥–∏—Ç–æ–≤**
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å—Ç–∏–∫–µ—Ä–ø–∞–∫ –∑–∞ 5 –º–∏–Ω—É—Ç –±–µ–∑ —É—Å–∏–ª–∏–π
- –†–æ—Å—Ç LTV –∏ retention

---

## –§–ª–æ—É

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç–∏–∫–µ—Ä (–ª—é–±–æ–π —Ç–∏–ø: —Å—Ç–∏–ª—å, —ç–º–æ—Ü–∏—è, –¥–≤–∏–∂–µ–Ω–∏–µ, —Ç–µ–∫—Å—Ç)

2. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∏–∫–µ—Ä + –∫–Ω–æ–ø–∫–∏ (–∫–∞–∫ —Å–µ–π—á–∞—Å) + –ù–û–í–ê–Ø –∫–Ω–æ–ø–∫–∞:
   [üòÇ –≠–º–æ—Ü–∏—è] [üèÉ –î–≤–∏–∂–µ–Ω–∏–µ] [üí¨ –¢–µ–∫—Å—Ç]
   [üí° –ò–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞]                        ‚Üê –ù–û–í–û–ï
   [üì∑ –ù–æ–≤–æ–µ —Ñ–æ—Ç–æ] [üõí –ö—É–ø–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã]

3. –ö–ª–∏–∫ "üí° –ò–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞":
   - AI (GPT-4o –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ OPENAI_API_KEY, –∏–Ω–∞—á–µ Gemini Flash) –ø–æ–ª—É—á–∞–µ—Ç: —Å—Ç–∏–∫–µ—Ä-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ + —Å—Ç–∏–ª—å + –∫–æ–Ω—Ç–µ–∫—Å—Ç
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 8-10 –∏–¥–µ–π (—Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å, –Ω–µ –∫–∞—Ä—Ç–∏–Ω–∫–∞)
   - –ò–¥–µ–∏ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –≤ —Å–µ—Å—Å–∏–∏
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è –∏–¥–µ—è

4. –°–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–¥–µ–µ–π:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  üí° –ò–¥–µ—è 1 –∏–∑ 8                          ‚îÇ
   ‚îÇ                                          ‚îÇ
   ‚îÇ  üòÇ –•–æ—Ö–æ—á–µ—Ç –¥–æ —Å–ª—ë–∑                      ‚îÇ
   ‚îÇ  –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–º–µ—ë—Ç—Å—è, –¥–µ—Ä–∂–∞—Å—å –∑–∞ –∂–∏–≤–æ—Ç      ‚îÇ
   ‚îÇ                                          ‚îÇ
   ‚îÇ  [üé® –°–≥–µ–Ω–µ—Ä–∏—Ç—å (1üíé)] [‚û°Ô∏è –°–ª–µ–¥—É—é—â–∞—è]    ‚îÇ
   ‚îÇ  [‚úÖ –•–≤–∞—Ç–∏—Ç]                              ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

5a. –ö–ª–∏–∫ "üé® –°–≥–µ–Ω–µ—Ä–∏—Ç—å":
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤ (1 –∫—Ä–µ–¥–∏—Ç)
    - –ï—Å–ª–∏ –Ω–µ—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤ ‚Üí paywall (–∫–∞–∫ –æ–±—ã—á–Ω–æ)
    - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è: –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ + —Ç–æ—Ç –∂–µ —Å—Ç–∏–ª—å + promptModification –∏–∑ –∏–¥–µ–∏
    - –°—Ç–∏–∫–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é + –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–∞–∫
    - –ò–¥–µ—è –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ "—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞"
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –∏–¥–µ—è

5b. –ö–ª–∏–∫ "‚û°Ô∏è –°–ª–µ–¥—É—é—â–∞—è":
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∏–¥–µ—é (–±–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –±–µ—Å–ø–ª–∞—Ç–Ω–æ)

5c. –ö–ª–∏–∫ "‚úÖ –•–≤–∞—Ç–∏—Ç":
    - "üéâ –û—Ç–ª–∏—á–Ω–æ! –í —Ç–≤–æ—ë–º –ø–∞–∫–µ —É–∂–µ N —Å—Ç–∏–∫–µ—Ä–æ–≤"
    - –ö–Ω–æ–ø–∫–∏: [üì∑ –ù–æ–≤–æ–µ —Ñ–æ—Ç–æ] [üí° –ï—â—ë –∏–¥–µ–∏]

6. –ö–æ–≥–¥–∞ –∏–¥–µ–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å:
   - "–í—Å–µ 8 –∏–¥–µ–π –ø–æ–∫–∞–∑–∞–Ω—ã! –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: N –∏–∑ 8"
   - –ö–Ω–æ–ø–∫–∞: [üîÑ –ù–æ–≤—ã–µ –∏–¥–µ–∏] ‚Üí AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ—â—ë 8
```

---

## –¢–∏–ø—ã –∏–¥–µ–π (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)

AI –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –º–∏–∫—Å –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ –ø–∞–∫–∞:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ü—Ä–∏–º–µ—Ä | –¢–µ–∫—Å—Ç –Ω–∞ —Å—Ç–∏–∫–µ—Ä–µ | –ö–æ–ª-–≤–æ –≤ –Ω–∞–±–æ—Ä–µ |
|-----------|--------|---|---|
| **–≠–º–æ—Ü–∏—è** | –•–æ—Ö–æ—á–µ—Ç, –∑–ª–∏—Ç—Å—è, –ø–ª–∞—á–µ—Ç, –≤ —à–æ–∫–µ, —Å–º—É—â—ë–Ω | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ("–•–ê–•–ê–•–ê") | 2-3 |
| **–î–µ–π—Å—Ç–≤–∏–µ/–ø–æ–∑–∞** | –ú–∞—à–µ—Ç —Ä—É–∫–æ–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–ª–∞—Å—Å, –±–µ–∂–∏—Ç, —Ç–∞–Ω—Ü—É–µ—Ç | –ù–µ—Ç | 1-2 |
| **–°—Ü–µ–Ω–∞** | –° –∫–æ—Ñ–µ —É—Ç—Ä–æ–º, –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º, –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫–µ | –ù–µ—Ç | 1-2 |
| **–¢–µ–∫—Å—Ç-–º–µ–º** | –° —Ä–µ—á–µ–≤—ã–º –ø—É–∑—ã—Ä—ë–º –∏–ª–∏ —Ç–∞–±–ª–∏—á–∫–æ–π | –î–∞ ("–û–ö", "–ñ–∏–∑–∞", "–ù–µ—Ç", "–û—Ä—É") | 2-3 |
| **–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π** | –° —Ç–æ—Ä—Ç–æ–º, —Å —à–∞—Ä–∏–∫–∞–º–∏, —Å –ø–æ–¥–∞—Ä–∫–æ–º | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ("–° –î–†!") | 0-1 |
| **–°—Ç–∏–ª—å –æ–¥–µ–∂–¥—ã/–æ–±—Ä–∞–∑** | –í –∫–æ—Å—Ç—é–º–µ —Å—É–ø–µ—Ä–≥–µ—Ä–æ—è, –≤ –ø–∏–∂–∞–º–µ, —Å –∫–æ—Ä–æ–Ω–æ–π | –ù–µ—Ç | 0-1 |

**–ü—Ä–∞–≤–∏–ª–æ:** –≤ –Ω–∞–±–æ—Ä–µ –∏–∑ 8 –∏–¥–µ–π –º–∏–Ω–∏–º—É–º 2 —Å —Ç–µ–∫—Å—Ç–æ–º, –º–∏–Ω–∏–º—É–º 2 —ç–º–æ—Ü–∏–∏, –º–∏–Ω–∏–º—É–º 1 –¥–µ–π—Å—Ç–≤–∏–µ.

---

## –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

AI –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∏–¥–µ–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **—É–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª** –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏.

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ (–ø–µ—Ä–µ–¥–∞—é—Ç—Å—è AI):
- –°–ø–∏—Å–æ–∫ —É–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–º–æ—Ü–∏–π (`session.generated_emotions[]`)
- –°–ø–∏—Å–æ–∫ —É–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π (`session.generated_motions[]`)
- –°–ø–∏—Å–æ–∫ —Ä–∞–Ω–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –∏–¥–µ–π (–µ—Å–ª–∏ –ø—Ä–æ—Å—è—Ç "–ù–æ–≤—ã–µ –∏–¥–µ–∏")

**–ü—Ä–∏–º–µ—Ä –≤ –ø—Ä–æ–º–ø—Ç–µ:**
```
Already generated stickers in this pack:
- Style: anime_classic (initial sticker)
- Emotion: laughing
- Motion: waving hand

Do NOT suggest ideas similar to these. All ideas must be unique.
```

---

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∏–¥–µ–∏

```typescript
interface StickerIdea {
  id: string;                    // "idea_1" ‚Äî –¥–ª—è callback_data
  emoji: string;                 // "üòÇ"
  titleRu: string;               // "–•–æ—Ö–æ—á–µ—Ç –¥–æ —Å–ª—ë–∑"
  titleEn: string;               // "Laughing hard"
  descriptionRu: string;         // "–ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–º–µ—ë—Ç—Å—è, –¥–µ—Ä–∂–∞—Å—å –∑–∞ –∂–∏–≤–æ—Ç"
  descriptionEn: string;         // "Character laughing, holding belly"
  promptModification: string;    // "laughing hysterically, holding belly, tears of joy"
  hasText: boolean;              // true ‚Äî –Ω–∞ —Å—Ç–∏–∫–µ—Ä–µ –±—É–¥–µ—Ç —Ç–µ–∫—Å—Ç
  textSuggestion?: string;       // "–•–ê–•–ê–•–ê" ‚Äî —Ç–µ–∫—Å—Ç –¥–ª—è —Å—Ç–∏–∫–µ—Ä–∞
  textPlacement?: string;        // "speech_bubble" | "sign" | "bottom_caption"
  category: string;              // "emotion" | "action" | "scene" | "text_meme" | "holiday" | "outfit"
  generated?: boolean;           // true –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞)
}
```

---

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ–π (AI-–∑–∞–ø—Ä–æ—Å)

### –ú–æ–¥–µ–ª—å
**GPT-4o** (–ø—Ä–∏ OPENAI_API_KEY) –∏–ª–∏ **Gemini 2.5 Flash** (fallback) ‚Äî –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è JSON –∏–¥–µ–π.

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∏–∫–µ—Ä (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) ‚Äî –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
2. `style_preset_id` + `prompt_hint` —Å—Ç–∏–ª—è
3. –Ø–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ru/en)
4. –°–ø–∏—Å–æ–∫ —É–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç–∏–∫–µ—Ä–æ–≤ –≤ –ø–∞–∫–µ

### System prompt

```
You are a professional sticker pack designer. Analyze the sticker image and create
a set of 8 unique ideas for additional stickers in the same style to build a complete
sticker pack.

The user's sticker style: {style_name} ({prompt_hint})

Already existing stickers in the pack (DO NOT repeat similar ideas):
{existing_stickers_list}

Rules:
1. Each idea must be visually distinct from all others
2. Mix categories for a well-rounded pack:
   - 2-3 emotion ideas (happy, angry, sad, shocked, shy, etc.)
   - 1-2 action/pose ideas (waving, thumbs up, running, dancing)
   - 2-3 text/meme ideas with short text on the sticker
   - 1-2 scene ideas (morning coffee, working, party)
3. For text ideas:
   - Suggest short text (1-3 words) in {language}
   - Text should be casual/memey: "–û–ö", "–ù–µ—Ç", "–ñ–∏–∑–∞", "–ü—Ä–∏–≤–µ—Ç!", "–û—Ä—É", "–°–ø–∞—Å–∏–±–æ"
   - Specify placement: speech_bubble, sign, or bottom_caption
4. promptModification must be in English, detailed enough for image generation
5. Keep the same character/subject from the original sticker

Return a JSON array of exactly 8 ideas in this format:
[{
  "emoji": "üòÇ",
  "titleRu": "–•–æ—Ö–æ—á–µ—Ç –¥–æ —Å–ª—ë–∑",
  "titleEn": "Laughing hard",
  "descriptionRu": "–ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–º–µ—ë—Ç—Å—è, –¥–µ—Ä–∂–∞—Å—å –∑–∞ –∂–∏–≤–æ—Ç",
  "descriptionEn": "Character laughing hysterically, holding belly",
  "promptModification": "laughing hysterically, holding belly, tears of joy, mouth wide open",
  "hasText": false,
  "textSuggestion": null,
  "textPlacement": null,
  "category": "emotion"
}]
```

### –°—Ç–æ–∏–º–æ—Å—Ç—å
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ–π: **–±–µ—Å–ø–ª–∞—Ç–Ω–æ** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ Flash ‚âà $0.001)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∏–∫–µ—Ä–∞ –∏–∑ –∏–¥–µ–∏: **1 –∫—Ä–µ–¥–∏—Ç** (–∫–∞–∫ –æ–±—ã—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)

---

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∏–∫–µ—Ä–∞ –∏–∑ –∏–¥–µ–∏

–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π pipeline `startGeneration()` —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø—Ä–æ–º–ø—Ç–∞.

### –ò—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ** (`session.current_photo_file_id`) ‚Äî –ù–ï —Å—Ç–∏–∫–µ—Ä
- –°—Ç–∏–ª—å: —Ç–æ—Ç –∂–µ `style_preset_id`

### –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
–ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç —Å—Ç–∏–ª—è + `promptModification` –∏–∑ –∏–¥–µ–∏:

```typescript
const basePrompt = await getAgentPrompt(stylePresetId, originalPhoto);
const ideaPrompt = `${basePrompt}. Additional direction: ${idea.promptModification}`;
```

### –¢–µ–∫—Å—Ç –Ω–∞ —Å—Ç–∏–∫–µ—Ä–µ (–¥–ª—è –∏–¥–µ–π —Å `hasText = true`)

**–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**

| –£—Å–ª–æ–≤–∏–µ | –ú–µ—Ç–æ–¥ | –ö–∞–∫ |
|---------|-------|-----|
| `textPlacement = "speech_bubble"` | –í –ø—Ä–æ–º–ø—Ç–µ | –î–æ–±–∞–≤–∏—Ç—å –≤ promptModification: `"with speech bubble saying '{text}'"` |
| `textPlacement = "sign"` | –í –ø—Ä–æ–º–ø—Ç–µ | –î–æ–±–∞–≤–∏—Ç—å: `"holding a sign that reads '{text}'"` |
| `textPlacement = "bottom_caption"` | Overlay | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–∫–µ—Ä –±–µ–∑ —Ç–µ–∫—Å—Ç–∞, –Ω–∞–ª–æ–∂–∏—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ —á–µ—Ä–µ–∑ `image-utils.ts` |

**–õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞:**
```typescript
if (idea.hasText && idea.textSuggestion) {
  if (idea.textPlacement === "bottom_caption") {
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –±–µ–∑ —Ç–µ–∫—Å—Ç–∞, –¥–æ–±–∞–≤–ª—è–µ–º overlay –ø–æ—Å–ª–µ
    options.textPrompt = idea.textSuggestion;
    options.generationType = "text";
  } else {
    // –¢–µ–∫—Å—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–º–ø—Ç (speech bubble / sign)
    const textInPrompt = idea.textPlacement === "speech_bubble"
      ? `with speech bubble saying "${idea.textSuggestion}"`
      : `holding a sign that reads "${idea.textSuggestion}"`;
    idea.promptModification += `. ${textInPrompt}`;
  }
}
```

---

## –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –í —Ç–∞–±–ª–∏—Ü–µ sessions (–Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏)

```sql
ALTER TABLE sessions ADD COLUMN IF NOT EXISTS
  pack_ideas jsonb DEFAULT NULL;
-- –ú–∞—Å—Å–∏–≤ StickerIdea[], –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI

ALTER TABLE sessions ADD COLUMN IF NOT EXISTS
  current_idea_index int DEFAULT 0;
-- –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ–º–æ–π –∏–¥–µ–∏

ALTER TABLE sessions ADD COLUMN IF NOT EXISTS
  generated_from_ideas text[] DEFAULT '{}';
-- –°–ø–∏—Å–æ–∫ idea.id –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
```

### –í —Ç–∞–±–ª–∏—Ü–µ stickers (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```sql
ALTER TABLE stickers ADD COLUMN IF NOT EXISTS
  idea_source text DEFAULT NULL;
-- –ï—Å–ª–∏ —Å—Ç–∏–∫–µ—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏–∑ –∏–¥–µ–∏ ‚Äî —Ö—Ä–∞–Ω–∏—Ç idea.id –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
```

---

## Callback-–∫–Ω–æ–ø–∫–∏

| callback_data | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `pack_ideas:{stickerId}` | –ö–Ω–æ–ø–∫–∞ "üí° –ò–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞" ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏–¥–µ–π |
| `idea_generate:{ideaIndex}` | –ö–Ω–æ–ø–∫–∞ "üé® –°–≥–µ–Ω–µ—Ä–∏—Ç—å" ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç–∏–∫–µ—Ä –∏–∑ –∏–¥–µ–∏ |
| `idea_next` | –ö–Ω–æ–ø–∫–∞ "‚û°Ô∏è –°–ª–µ–¥—É—é—â–∞—è" ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∏–¥–µ—é |
| `idea_done` | –ö–Ω–æ–ø–∫–∞ "‚úÖ –•–≤–∞—Ç–∏—Ç" ‚Äî –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–¥–µ–π |
| `idea_more` | –ö–Ω–æ–ø–∫–∞ "üîÑ –ù–æ–≤—ã–µ –∏–¥–µ–∏" ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –Ω–∞–±–æ—Ä –∏–∑ 8 |

---

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ src/index.ts

### 1. –ö–Ω–æ–ø–∫–∞ "üí° –ò–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞" ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–ì–¥–µ:** –í `src/worker.ts`, –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∏–∫–µ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –≤ –±–ª–æ–∫–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫.

–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤ inline_keyboard:
```typescript
{ text: "üí° –ò–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞", callback_data: `pack_ideas:${stickerId}` }
```

### 2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ pack_ideas

```typescript
bot.action(/^pack_ideas:(.+)$/, async (ctx) => {
  safeAnswerCbQuery(ctx);
  const stickerId = ctx.match[1];

  const user = await getUser(ctx.from.id);
  const session = await getActiveSession(user.id);
  const lang = user.lang || "en";

  // –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∏–∫–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
  const { data: sticker } = await supabase
    .from("stickers")
    .select("telegram_file_id, style_preset_id")
    .eq("id", stickerId)
    .maybeSingle();

  if (!sticker?.telegram_file_id) return;

  // –ü–æ–∫–∞–∑–∞—Ç—å "–¥—É–º–∞—é..."
  const thinkingMsg = await ctx.reply(
    lang === "ru" ? "üí° –ü—Ä–∏–¥—É–º—ã–≤–∞—é –∏–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞..." : "üí° Thinking of ideas..."
  );

  // –°–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç: —á—Ç–æ —É–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ
  const existingStickers = await getPackContext(session.id);

  // –í—ã–∑–≤–∞—Ç—å AI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–¥–µ–π
  const ideas = await generatePackIdeas({
    stickerFileId: sticker.telegram_file_id,
    stylePresetId: sticker.style_preset_id,
    lang,
    existingStickers,
  });

  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–¥–µ–∏ –≤ —Å–µ—Å—Å–∏—é
  await supabase.from("sessions").update({
    pack_ideas: ideas,
    current_idea_index: 0,
    state: "browsing_ideas",
  }).eq("id", session.id);

  // –£–¥–∞–ª–∏—Ç—å "–¥—É–º–∞—é..."
  try { await ctx.deleteMessage(thinkingMsg.message_id); } catch {}

  // –ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–≤—É—é –∏–¥–µ—é
  await showIdea(ctx, ideas[0], 0, ideas.length, lang);
});
```

### 3. –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∏–¥–µ–∏

```typescript
async function showIdea(
  ctx: any,
  idea: StickerIdea,
  index: number,
  total: number,
  lang: string
) {
  const title = lang === "ru" ? idea.titleRu : idea.titleEn;
  const desc = lang === "ru" ? idea.descriptionRu : idea.descriptionEn;
  const textHint = idea.hasText && idea.textSuggestion
    ? `\n‚úèÔ∏è –¢–µ–∫—Å—Ç: "${idea.textSuggestion}"`
    : "";

  const text = `üí° ${lang === "ru" ? "–ò–¥–µ—è" : "Idea"} ${index + 1}/${total}\n\n`
    + `${idea.emoji} **${title}**\n`
    + `${desc}${textHint}`;

  const generateText = lang === "ru"
    ? `üé® –°–≥–µ–Ω–µ—Ä–∏—Ç—å (1üíé)`
    : `üé® Generate (1üíé)`;
  const nextText = lang === "ru" ? "‚û°Ô∏è –°–ª–µ–¥—É—é—â–∞—è" : "‚û°Ô∏è Next";
  const doneText = lang === "ru" ? "‚úÖ –•–≤–∞—Ç–∏—Ç" : "‚úÖ Done";

  await ctx.reply(text, {
    parse_mode: "Markdown",
    reply_markup: {
      inline_keyboard: [
        [
          { text: generateText, callback_data: `idea_generate:${index}` },
          { text: nextText, callback_data: "idea_next" },
        ],
        [{ text: doneText, callback_data: "idea_done" }],
      ],
    },
  });
}
```

### 4. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ idea_generate

```typescript
bot.action(/^idea_generate:(\d+)$/, async (ctx) => {
  safeAnswerCbQuery(ctx);

  const user = await getUser(ctx.from.id);
  const session = await getActiveSession(user.id);
  const ideaIndex = parseInt(ctx.match[1]);
  const ideas: StickerIdea[] = session.pack_ideas;
  const idea = ideas[ideaIndex];

  if (!idea) return;

  // –ü–æ–º–µ—Ç–∏—Ç—å –∏–¥–µ—é –∫–∞–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é
  ideas[ideaIndex].generated = true;

  // –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  const stylePreset = await getStylePreset(session.selected_style_id);
  let promptFinal = `${stylePreset.prompt_hint}. ${idea.promptModification}`;

  let textPrompt = null;
  let generationType = session.generation_type || "style";

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
  if (idea.hasText && idea.textSuggestion) {
    if (idea.textPlacement === "bottom_caption") {
      textPrompt = idea.textSuggestion;
      generationType = "text";
    } else {
      // –¢–µ–∫—Å—Ç –≤ –ø—Ä–æ–º–ø—Ç–µ (speech bubble / sign)
      const textInPrompt = idea.textPlacement === "speech_bubble"
        ? `with speech bubble saying "${idea.textSuggestion}"`
        : `holding a sign that reads "${idea.textSuggestion}"`;
      promptFinal += `. ${textInPrompt}`;
    }
  }

  // startGeneration (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π pipeline)
  await startGeneration(ctx, user, session, {
    generationType,
    promptFinal,
    textPrompt,
    selectedStyleId: session.selected_style_id,
    userInput: idea.titleEn,
    ideaSource: idea.id, // –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
  });

  // –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Å—Å–∏—é
  const nextIndex = ideaIndex + 1;
  await supabase.from("sessions").update({
    pack_ideas: ideas,
    current_idea_index: nextIndex,
    generated_from_ideas: [...(session.generated_from_ideas || []), idea.id],
  }).eq("id", session.id);

  // –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∏–∫–µ—Ä–∞ (–≤ worker.ts) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∏–¥–µ—é
  // –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –≤ worker.ts –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∏–∫–µ—Ä–∞
});
```

### 5. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

```typescript
bot.action("idea_next", async (ctx) => {
  safeAnswerCbQuery(ctx);
  const user = await getUser(ctx.from.id);
  const session = await getActiveSession(user.id);
  const ideas: StickerIdea[] = session.pack_ideas;
  const nextIndex = (session.current_idea_index || 0) + 1;
  const lang = user.lang || "en";

  if (nextIndex >= ideas.length) {
    // –í—Å–µ –∏–¥–µ–∏ –ø–æ–∫–∞–∑–∞–Ω—ã
    const generated = ideas.filter(i => i.generated).length;
    const text = lang === "ru"
      ? `üéâ –í—Å–µ ${ideas.length} –∏–¥–µ–π –ø–æ–∫–∞–∑–∞–Ω—ã! –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: ${generated}`
      : `üéâ All ${ideas.length} ideas shown! Generated: ${generated}`;
    await ctx.editMessageText(text, {
      reply_markup: {
        inline_keyboard: [
          [{ text: "üîÑ –ù–æ–≤—ã–µ –∏–¥–µ–∏", callback_data: "idea_more" }],
          [{ text: "üì∑ –ù–æ–≤–æ–µ —Ñ–æ—Ç–æ", callback_data: "new_photo" }],
        ],
      },
    });
    return;
  }

  await supabase.from("sessions").update({
    current_idea_index: nextIndex,
  }).eq("id", session.id);

  // –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–æ–≤–æ–π –∏–¥–µ–µ–π
  await showIdeaEdit(ctx, ideas[nextIndex], nextIndex, ideas.length, lang);
});

bot.action("idea_done", async (ctx) => {
  safeAnswerCbQuery(ctx);
  const user = await getUser(ctx.from.id);
  const lang = user.lang || "en";

  // –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å —Å—Ç–∏–∫–µ—Ä—ã –≤ –ø–∞–∫–µ
  const { count } = await supabase
    .from("stickers")
    .select("id", { count: "exact", head: true })
    .eq("user_id", user.id)
    .not("telegram_file_id", "is", null);

  const text = lang === "ru"
    ? `üéâ –û—Ç–ª–∏—á–Ω–æ! –í —Ç–≤–æ—ë–º –ø–∞–∫–µ —É–∂–µ ${count || 0} —Å—Ç–∏–∫–µ—Ä–æ–≤`
    : `üéâ Great! Your pack has ${count || 0} stickers`;

  await ctx.editMessageText(text, {
    reply_markup: {
      inline_keyboard: [
        [{ text: "üì∑ –ù–æ–≤–æ–µ —Ñ–æ—Ç–æ", callback_data: "new_photo" }],
        [{ text: "üí° –ï—â—ë –∏–¥–µ–∏", callback_data: "idea_more" }],
      ],
    },
  });
});

bot.action("idea_more", async (ctx) => {
  // –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–¥–µ–π —Å —É—á—ë—Ç–æ–º —É–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
  // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ pack_ideas, –Ω–æ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º existingStickers
  safeAnswerCbQuery(ctx);
  // ... –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π
});
```

---

## SQL-–º–∏–≥—Ä–∞—Ü–∏—è

```sql
-- 057_pack_ideas.sql

-- Pack ideas in sessions
ALTER TABLE sessions ADD COLUMN IF NOT EXISTS pack_ideas jsonb DEFAULT NULL;
ALTER TABLE sessions ADD COLUMN IF NOT EXISTS current_idea_index int DEFAULT 0;
ALTER TABLE sessions ADD COLUMN IF NOT EXISTS generated_from_ideas text[] DEFAULT '{}';

COMMENT ON COLUMN sessions.pack_ideas IS 'Cached array of StickerIdea[] from AI';
COMMENT ON COLUMN sessions.current_idea_index IS 'Current idea being shown to user';
COMMENT ON COLUMN sessions.generated_from_ideas IS 'Array of idea IDs that were generated';

-- Track idea source in stickers (for analytics)
ALTER TABLE stickers ADD COLUMN IF NOT EXISTS idea_source text DEFAULT NULL;
COMMENT ON COLUMN stickers.idea_source IS 'If sticker was generated from pack idea ‚Äî stores idea ID';

-- Add browsing_ideas state
-- (no schema change needed, state is text field)
```

---

## –ê–ª–µ—Ä—Ç –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑ –∏–¥–µ–∏ ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∞–ª–µ—Ä—Ç:
```typescript
sendAlert({
  type: "idea_generated",
  message: "üí° Sticker from pack idea",
  details: {
    user: `@${user.username || user.telegram_id}`,
    ideaTitle: idea.titleEn,
    ideaCategory: idea.category,
    hasText: idea.hasText,
    packSize: packStickersCount,
  },
});
```

---

## –¢–µ–∫—Å—Ç—ã (RU / EN)

| –ö–ª—é—á | RU | EN |
|------|----|----|
| `pack_ideas.button` | üí° –ò–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞ | üí° Pack ideas |
| `pack_ideas.thinking` | üí° –ü—Ä–∏–¥—É–º—ã–≤–∞—é –∏–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞... | üí° Thinking of ideas for your pack... |
| `pack_ideas.idea_header` | üí° –ò–¥–µ—è {n} –∏–∑ {total} | üí° Idea {n} of {total} |
| `pack_ideas.generate` | üé® –°–≥–µ–Ω–µ—Ä–∏—Ç—å (1üíé) | üé® Generate (1üíé) |
| `pack_ideas.next` | ‚û°Ô∏è –°–ª–µ–¥—É—é—â–∞—è | ‚û°Ô∏è Next |
| `pack_ideas.done` | ‚úÖ –•–≤–∞—Ç–∏—Ç | ‚úÖ Done |
| `pack_ideas.all_shown` | üéâ –í—Å–µ {total} –∏–¥–µ–π –ø–æ–∫–∞–∑–∞–Ω—ã! –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: {generated} | üéâ All {total} ideas shown! Generated: {generated} |
| `pack_ideas.more` | üîÑ –ù–æ–≤—ã–µ –∏–¥–µ–∏ | üîÑ More ideas |
| `pack_ideas.pack_size` | üéâ –û—Ç–ª–∏—á–Ω–æ! –í —Ç–≤–æ—ë–º –ø–∞–∫–µ —É–∂–µ {count} —Å—Ç–∏–∫–µ—Ä–æ–≤ | üéâ Great! Your pack has {count} stickers |
| `pack_ideas.text_hint` | ‚úèÔ∏è –¢–µ–∫—Å—Ç: "{text}" | ‚úèÔ∏è Text: "{text}" |

---

## –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [ ] SQL-–º–∏–≥—Ä–∞—Ü–∏—è: `pack_ideas`, `current_idea_index`, `generated_from_ideas` –≤ sessions; `idea_source` –≤ stickers
- [x] –§—É–Ω–∫—Ü–∏—è `generatePackIdeas()` ‚Äî GPT-4o (–∏–ª–∏ Gemini Flash fallback) —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ç–∏–∫–µ—Ä–∞
- [ ] –§—É–Ω–∫—Ü–∏—è `getPackContext()` ‚Äî —Å–æ–±—Ä–∞—Ç—å —É–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–∫–µ—Ä—ã –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
- [ ] –ö–Ω–æ–ø–∫–∞ "üí° –ò–¥–µ–∏ –¥–ª—è –ø–∞–∫–∞" –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (worker.ts)
- [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `bot.action(/^pack_ideas/)` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ–π
- [ ] –§—É–Ω–∫—Ü–∏–∏ `showIdea()` / `showIdeaEdit()` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–¥–µ–∏
- [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `bot.action(/^idea_generate/)` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∏–∫–µ—Ä–∞ –∏–∑ –∏–¥–µ–∏
- [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `bot.action("idea_next")` ‚Äî —Å–ª–µ–¥—É—é—â–∞—è –∏–¥–µ—è
- [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `bot.action("idea_done")` ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `bot.action("idea_more")` ‚Äî –Ω–æ–≤—ã–µ –∏–¥–µ–∏ —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π
- [ ] –õ–æ–≥–∏–∫–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç–∏–∫–µ—Ä–µ: speech_bubble —á–µ—Ä–µ–∑ –ø—Ä–æ–º–ø—Ç, bottom_caption —á–µ—Ä–µ–∑ overlay
- [ ] –¢–µ–∫—Å—Ç—ã –≤ bot_texts (RU/EN)
- [ ] –ê–ª–µ—Ä—Ç `idea_generated` –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- [ ] –ê–≤—Ç–æ–ø–æ–∫–∞–∑ —Å–ª–µ–¥—É—é—â–µ–π –∏–¥–µ–∏ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–≤ worker.ts)

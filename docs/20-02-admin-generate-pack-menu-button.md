# –ö–Ω–æ–ø–∫–∞ ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª –≤ –Ω–∏–∂–Ω–µ–º –º–µ–Ω—é (admin-only)

**–î–∞—Ç–∞:** 19.02.2026  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è  
**–°–≤—è–∑–∞–Ω–æ:** `src/index.ts` (–º–µ–Ω—é, pack flow), `docs/pack-batch-flow-9-scenes-rules.md`

## –¶–µ–ª—å

–í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª –≤ **–Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é** (Reply Keyboard) —Ä—è–¥–æ–º —Å ¬´–°–æ–∑–¥–∞—Ç—å –ø–∞–∫¬ª. –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ **—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É** –∏ —Ç–æ–ª—å–∫–æ –Ω–∞ **test**-–æ–∫—Ä—É–∂–µ–Ω–∏–∏.

–°–µ–π—á–∞—Å ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∫–∞–∫ inline-–∫–Ω–æ–ø–∫–∞ –Ω–∞ –∫–∞—Ä—É—Å–µ–ª–∏ –ø–∞–∫–∞ (–ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ñ–ª–æ—É ¬´–°–æ–∑–¥–∞—Ç—å –ø–∞–∫¬ª ‚Üí —Ñ–æ—Ç–æ ‚Üí —Å—Ç–∏–ª—å ‚Üí –∫–∞—Ä—É—Å–µ–ª—å). –ù—É–∂–µ–Ω –ø—Ä—è–º–æ–π –≤—Ö–æ–¥ –∏–∑ –º–µ–Ω—é: –∞–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚Üí –≤–≤–æ–¥–∏—Ç —Ç–µ–º—É ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–∞–π–ø–ª–∞–π–Ω –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞–∫–∞ (Brief & Plan ‚Üí Captions ‚à• Scenes ‚Üí Assembly ‚Üí Critic) ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –∫–Ω–æ–ø–∫–∞–º–∏ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å / –û—Ç–º–µ–Ω–∏—Ç—å / –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å.

---

## 1. –ö—Ç–æ –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É

- **–£—Å–ª–æ–≤–∏–µ:** `config.appEnv === "test"` –∏ `config.adminIds.includes(telegramId)`.
- –î–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–Ω–æ–ø–∫–∏ ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª –≤ –º–µ–Ω—é **–Ω–µ—Ç**.

---

## 2. –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –º–µ–Ω—é

- **–¢–µ–∫—É—â–µ–µ –º–µ–Ω—é (–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏):**
  - –°—Ç—Ä–æ–∫–∞ 1: `üì¶ –°–æ–∑–¥–∞—Ç—å –ø–∞–∫` / `üì¶ Create pack`
  - –°—Ç—Ä–æ–∫–∞ 2: `üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å`, `üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞` / `üí∞ Your balance`, `üí¨ Support`

- **–î–ª—è admin –Ω–∞ test:**
  - –°—Ç—Ä–æ–∫–∞ 1: –¥–≤–µ –∫–Ω–æ–ø–∫–∏ ‚Äî `üì¶ –°–æ–∑–¥–∞—Ç—å –ø–∞–∫` –∏ `üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫` (RU) / `üì¶ Create pack` –∏ `üîÑ Generate pack` (EN).
  - –°—Ç—Ä–æ–∫–∞ 2: –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

–ò–∫–æ–Ω–∫–∞ –¥–ª—è ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª ‚Äî üîÑ (–æ—Ç–ª–∏—á–∏–µ –æ—Ç ¬´–°–æ–∑–¥–∞—Ç—å –ø–∞–∫¬ª üì¶). –¢–µ–∫—Å—Ç—ã: RU ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª, EN ¬´Generate pack¬ª.

---

## 3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω—é (API –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)

- –°–µ–π—á–∞—Å: `getMainMenuKeyboard(lang: string)` ‚Äî –Ω–µ –∑–Ω–∞–µ—Ç, –∞–¥–º–∏–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
- –ù—É–∂–Ω–æ: –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–µ–Ω—é —É—á–∏—Ç—ã–≤–∞—Ç—å, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ admin-–∫–Ω–æ–ø–∫—É.

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**

- **A)** –°–∏–≥–Ω–∞—Ç—É—Ä–∞ `getMainMenuKeyboard(lang: string, options?: { telegramId?: number })`. –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω `telegramId` –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å admin –Ω–∞ test ‚Äî –≤ row1 –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤—Ç–æ—Ä–∞—è –∫–Ω–æ–ø–∫–∞. –í–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `getMainMenuKeyboard` –∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ `ctx.from?.id`, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `telegramId` (–º–æ–∂–Ω–æ –Ω–µ –≤–µ–∑–¥–µ ‚Äî –≥–¥–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—ë–º, –º–µ–Ω—é –±–µ–∑ admin-–∫–Ω–æ–ø–∫–∏).
- **B)** –û—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getMainMenuKeyboardForAdmin(lang, telegramId)` –∏ –≤—ã–∑—ã–≤–∞—Ç—å –µ—ë —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ —É–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞–¥–º–∏–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ /start –¥–ª—è –∞–¥–º–∏–Ω–∞). –ú–∏–Ω—É—Å: –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –±—É–¥–µ—Ç —Ä–∞–∑–Ω–æ–µ –º–µ–Ω—é (–≥–¥–µ –≤—ã–∑–≤–∞–ª–∏ —Å admin ‚Äî —Å –∫–Ω–æ–ø–∫–æ–π, –≥–¥–µ –±–µ–∑ ‚Äî –±–µ–∑), —á—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ: –∞–¥–º–∏–Ω –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ—Ç–≤–µ—Ç–µ –±–æ—Ç–∞ —Å –º–µ–Ω—é –ø–æ–ª—É—á–∏—Ç –ø–æ–ª–Ω–æ–µ –º–µ–Ω—é.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: **–≤–∞—Ä–∏–∞–Ω—Ç A** ‚Äî –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã, –≤–µ–∑–¥–µ –ø–µ—Ä–µ–¥–∞—ë–º `telegramId` –≥–¥–µ –æ–Ω –µ—Å—Ç—å (`ctx.from?.id`), —Ç–æ–≥–¥–∞ —É –∞–¥–º–∏–Ω–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ–µ –º–µ–Ω—é –ø—Ä–∏ –ª—é–±–æ–º –æ—Ç–≤–µ—Ç–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π.

---

## 4. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª

- **–¢—Ä–∏–≥–≥–µ—Ä:** `bot.hears(["üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫", "üîÑ Generate pack"], ...)`.
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –µ—Å–ª–∏ –Ω–µ test –∏–ª–∏ –Ω–µ admin ‚Äî –º–æ–∂–Ω–æ –º–æ–ª—á–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å ¬´–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ¬ª (–∫–Ω–æ–ø–∫–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –Ω–µ-–∞–¥–º–∏–Ω–∞–º, –Ω–æ –∑–∞—â–∏—Ç–∞ –Ω–∞ —Å–ª—É—á–∞–π —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞).
- **–î–µ–π—Å—Ç–≤–∏—è:**
  1. –ü–æ–ª—É—á–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`getUser(telegramId)`).
  2. –°–æ–∑–¥–∞—Ç—å **–Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é** –¥–ª—è admin generate flow:
     - `flow_kind: "pack"`, `state: "wait_pack_generate_request"`, `env: config.appEnv`, `is_active: true`.
     - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `pack_template_id` ‚Äî –ø–µ—Ä–≤—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —à–∞–±–ª–æ–Ω –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –¥–ª—è ¬´generate-only¬ª; –¥–ª—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã —Ñ–æ—Ç–æ). –î–ª—è `subjectTypeFromSession(session)` –Ω—É–∂–Ω—ã `subject_mode` –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ `subject_gender` ‚Äî –∑–∞–¥–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `subject_mode: "single"`, `subject_gender: "female"`) —á—Ç–æ–±—ã –ø–∞–π–ø–ª–∞–π–Ω –ø–æ–ª—É—á–∏–ª –≤–∞–ª–∏–¥–Ω—ã–π SubjectType.
  3. –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–∞–∫ –≤ `pack_start`).
  4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: ¬´–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –ø–∞–∫–∞ –æ–¥–Ω–æ–π —Ñ—Ä–∞–∑–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: –æ—Ñ–∏—Å–Ω—ã–π —é–º–æ—Ä, 23 —Ñ–µ–≤—Ä–∞–ª—è Z —Å—Ç–∏–ª—å).¬ª
  5. –î–∞–ª—å—à–µ —Ç–æ—Ç –∂–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞, —á—Ç–æ –∏ –¥–ª—è callback `pack_admin_generate`: –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `wait_pack_generate_request` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `runPackGenerationPipeline(request, subjectTypeFromSession(session), ...)` –∏ –ø–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å / –û—Ç–º–µ–Ω–∏—Ç—å / –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å.

–°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ —Ç–µ–º—ã (progress, Critic, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Å–µ—Å—Å–∏—é `pending_rejected_pack_spec` –∏ —Ç.–¥.) **–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π**.

---

## 5. –û—Ç–ª–∏—á–∏—è –æ—Ç –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ –∫–∞—Ä—É—Å–µ–ª—å

| –ê—Å–ø–µ–∫—Ç | –ö–∞—Ä—É—Å–µ–ª—å (pack_admin_generate) | –ú–µ–Ω—é (–Ω–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞) |
|--------|-------------------------------|----------------------|
| –í—Ö–æ–¥ | Inline-–∫–Ω–æ–ø–∫–∞ ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª –ø–æ–¥ –∫–∞—Ä—É—Å–µ–ª—å—é, —Å–µ—Å—Å–∏—è —É–∂–µ –µ—Å—Ç—å (wait_pack_carousel) | –ö–Ω–æ–ø–∫–∞ –≤ Reply Keyboard, —Å–µ—Å—Å–∏–∏ –µ—â—ë –Ω–µ—Ç |
| –°–µ—Å—Å–∏—è | –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –≤ wait_pack_generate_request | –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Å state wait_pack_generate_request |
| subject_type | –ò–∑ —Å–µ—Å—Å–∏–∏ (–ø–æ —Ñ–æ—Ç–æ/–≤—ã–±–æ—Ä—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) | –î–µ—Ñ–æ–ª—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä single_female), —Ç.–∫. —Ñ–æ—Ç–æ –Ω–µ—Ç |
| –î–∞–ª—å—à–µ | –û–¥–∏–Ω–∞–∫–æ–≤–æ: –≤–≤–æ–¥ —Ç–µ–º—ã ‚Üí –ø–∞–π–ø–ª–∞–π–Ω ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å/–û—Ç–º–µ–Ω–∏—Ç—å/–ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å | –¢–æ –∂–µ |

---

## 6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–∏—Å–∫–∏

- **–¢–æ–ª—å–∫–æ test:** –Ω–∞ prod –∫–Ω–æ–ø–∫—É –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å.
- **–û–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π —Ñ–ª–æ—É:** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ ¬´generate from menu¬ª –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–∞–∫ —Å–µ–π—á–∞—Å –¥–ª—è pack_start).
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–π:** –µ—Å–ª–∏ –∞–¥–º–∏–Ω —É–∂–µ –≤ –¥—Ä—É–≥–æ–º pack-—Å–æ—Å—Ç–æ—è–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, wait_pack_photo), –ø–æ –Ω–∞–∂–∞—Ç–∏—é ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è –∏ —Å—Ç–∞—Ä—ã–µ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è ‚Äî –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–∞–∫–æ–µ –∂–µ, –∫–∞–∫ ¬´–Ω–∞—á–∞—Ç—å —Å –Ω—É–ª—è¬ª.

---

## 7. –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å `getMainMenuKeyboard(lang, options?: { telegramId?: number })`: –ø—Ä–∏ `telegramId` –∏ admin –Ω–∞ test –¥–æ–±–∞–≤–ª—è—Ç—å –≤ row1 –≤—Ç–æ—Ä—É—é –∫–Ω–æ–ø–∫—É ¬´üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª / ¬´üîÑ Generate pack¬ª.
- [ ] –í–æ –≤—Å–µ—Ö –≤—ã–∑–æ–≤–∞—Ö `getMainMenuKeyboard(lang)` –≥–¥–µ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ `ctx`, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `ctx.from?.id` (–∏–ª–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ –º–µ—Å—Ç—É).
- [ ] –î–æ–±–∞–≤–∏—Ç—å `bot.hears(["üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫", "üîÑ Generate pack"], ...)`: –ø—Ä–æ–≤–µ—Ä–∫–∞ test + admin, —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ wait_pack_generate_request —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º subject, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤–≤–µ—Å—Ç–∏ —Ç–µ–º—É.
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è `wait_pack_generate_request` –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥ —Ç–µ–º—ã –∏ –¥–ª—è —Å–µ—Å—Å–∏–∏, —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∏–∑ –º–µ–Ω—é (–±–µ–∑ –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ä—É—Å–µ–ª–∏).
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `docs/architecture/01-api-bot.md`: –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ–Ω—é –∏ admin-only –∫–Ω–æ–ø–∫–∏.

---

## 8. –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–æ–¥—É

| –ß—Ç–æ | –§–∞–π–ª | –ú–µ—Å—Ç–æ |
|-----|------|--------|
| –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–µ–Ω—é | `src/index.ts` | `getMainMenuKeyboard` (~1471) |
| –í—ã–∑–æ–≤—ã –º–µ–Ω—é | `src/index.ts` | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Å—Ç —Å `getMainMenuKeyboard(lang)` |
| –í—Ö–æ–¥ ¬´–°–æ–∑–¥–∞—Ç—å –ø–∞–∫¬ª | `src/index.ts` | `bot.hears(["üì¶ –°–æ–∑–¥–∞—Ç—å –ø–∞–∫", ...])` (~3889) |
| Callback ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫¬ª (–∫–∞—Ä—É—Å–µ–ª—å) | `src/index.ts` | `bot.action(/^pack_admin_generate/)` (~4108) |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Ç–µ–º—ã | `src/index.ts` | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞ —Å `isAdminPackThemeRequest`, `wait_pack_generate_request` (~5714‚Äì5814) |
| Admin check | `src/index.ts` | `config.adminIds.includes(telegramId)`, `config.appEnv === "test"` |
| –ö–æ–Ω—Ñ–∏–≥ admin | `src/config.ts` | `adminIds` –∏–∑ `ADMIN_IDS` |

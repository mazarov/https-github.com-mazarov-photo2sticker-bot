# Video ‚Üí Sticker Pack ‚Äî –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

> –î–∞—Ç–∞: 14.02.2026
> –°—Ç–∞—Ç—É—Å: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
> –ü—Ä–æ–µ–∫—Ç: photo2sticker-bot (–æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç @sticq_bot)

## 1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –≤–∏–¥–µ–æ (–∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ TikTok / YouTube Shorts) ‚Äî –±–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—é–∂–µ—Ç, –≤—ã–±–∏—Ä–∞–µ—Ç —Å–∞–º—ã–µ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç–∏–∫–µ—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤ –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π Telegram Sticker Pack.

**–¶–µ–ª—å**: –≤–∏—Ä—É—Å–Ω—ã–π –ø—Ä–æ–º–æ-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∏—Ç—Å—è –ø–∞–∫–æ–º –≤ —á–∞—Ç–∞—Ö, –∫–∞–∂–¥—ã–π –ø–∞–∫ = —Ä–µ–∫–ª–∞–º–∞ –±–æ—Ç–∞.

## 2. User Flow

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   - –í–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é –≤ –±–æ—Ç (–¥–æ 60 —Å–µ–∫)
   - –ò–õ–ò —Å—Å—ã–ª–∫—É –Ω–∞ TikTok / YouTube Shorts

2. –ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å—Ç–∏–ª—å —Å—Ç–∏–∫–µ—Ä–æ–≤:
   - üé® Cartoon (–º—É–ª—å—Ç—è—à–Ω—ã–π)
   - ‚úèÔ∏è Sketch (—Å–∫–µ—Ç—á)
   - üå∏ Kawaii (–∫–∞–≤–∞–π–Ω—ã–π)
   - üî• Pixel Art
   - ‚úçÔ∏è –°–≤–æ–π —Å—Ç–∏–ª—å (–≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–æ–º)

3. –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç:
   "üé¨ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –≤–∏–¥–µ–æ... (5 —Å–µ–∫)"
   "üñº –ì–µ–Ω–µ—Ä–∏—Ä—É—é 8 —Å—Ç–∏–∫–µ—Ä–æ–≤... (20 —Å–µ–∫)"
   "üì¶ –°–æ–±–∏—Ä–∞—é –ø–∞–∫... (3 —Å–µ–∫)"

4. –†–µ–∑—É–ª—å—Ç–∞—Ç:
   - –°—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ç–æ–≤—ã–π —Å—Ç–∏–∫–µ—Ä-–ø–∞–∫: t.me/addstickers/VideoStickers_12345_by_sticq_bot
   - –ü—Ä–µ–≤—å—é: 3-4 —Å—Ç–∏–∫–µ—Ä–∞ –ø–æ–∫–∞–∑–∞–Ω—ã –≤ —á–∞—Ç–µ
   - –ö–Ω–æ–ø–∫–∏: [üì¶ –û—Ç–∫—Ä—ã—Ç—å –ø–∞–∫] [üîÑ –î—Ä—É–≥–æ–π —Å—Ç–∏–ª—å] [üì∑ –ò–∑ —Ñ–æ—Ç–æ]
```

## 3. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∞–π–ø–ª–∞–π–Ω

### 3.1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∏–¥–µ–æ

**–í–∞—Ä–∏–∞–Ω—Ç A ‚Äî –í–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é –≤ –±–æ—Ç (MVP)**:
- Telegram Bot API: `message.video` –∏–ª–∏ `message.video_note`
- –õ–∏–º–∏—Ç: –¥–æ 20 MB (Telegram API), –¥–æ 60 —Å–µ–∫—É–Ω–¥
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: `getFile` ‚Üí `downloadFile` (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `telegram.ts`)

**–í–∞—Ä–∏–∞–Ω—Ç B ‚Äî –°—Å—ã–ª–∫–∞ –Ω–∞ TikTok / YouTube Shorts (—Ñ–∞–∑–∞ 2)**:
- –ü–∞—Ä—Å–∏–Ω–≥ URL: regex –¥–ª—è `tiktok.com`, `vm.tiktok.com`, `youtube.com/shorts/`
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: `yt-dlp` (–±–∏–Ω–∞—Ä–Ω–∏–∫ –≤ Docker)
  ```bash
  yt-dlp -f "best[height<=720][ext=mp4]" --max-filesize 50M -o /tmp/video.mp4 "URL"
  ```
- Fallback: API-—Å–µ—Ä–≤–∏—Å—ã (RapidAPI TikTok Downloader) –µ—Å–ª–∏ yt-dlp –±–ª–æ—á–∞—Ç
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –ø—Ä–æ–∫—Å–∏ –¥–ª—è TikTok (—Å–µ—Ä–≤–µ—Ä–Ω—ã–µ IP –±–ª–æ—á–∞—Ç)

### 3.2. –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ ‚Äî Gemini Video API

**–û–¥–∏–Ω –≤—ã–∑–æ–≤ Gemini 2.5 Flash / Pro**:

```
Model: gemini-2.5-flash (–±—ã—Å—Ç—Ä–µ–µ) –∏–ª–∏ gemini-2.5-pro (—Ç–æ—á–Ω–µ–µ)
Input: video/mp4 (–¥–æ 20MB)

System Prompt:
  "You are a sticker pack designer. Analyze this short video and select 
   the 8 most expressive, emotionally distinct moments that would make 
   great stickers.
   
   For each moment, provide:
   - timestamp: float (seconds from start)
   - emotion: string (e.g. shocked, laughing, dancing, crying, angry)
   - pose_description: string (body language, hand positions, face)
   - sticker_text: string (1-3 words, meme-style caption)
   - importance: 1-10
   
   RULES:
   - Pick moments with DIFFERENT emotions (no duplicates)
   - Prefer clear face expressions and distinctive body language
   - Prefer well-lit frames where face is visible
   - Avoid blurry or transitional frames
   - Space moments at least 1.5 seconds apart
   
   Return as JSON array, sorted by timestamp."

Output:
{
  "character_description": "Young woman, brown hair in ponytail, round face, 
                            big brown eyes, wearing blue hoodie",
  "video_mood": "comedic, energetic",
  "moments": [
    {
      "timestamp": 2.8,
      "emotion": "shocked",
      "pose_description": "Mouth wide open, hands on cheeks, leaning back",
      "sticker_text": "OMG",
      "importance": 9
    },
    {
      "timestamp": 5.1,
      "emotion": "laughing",
      "pose_description": "Head tilted back, eyes closed, hand on stomach",
      "sticker_text": "LOL",
      "importance": 8
    },
    // ... –µ—â—ë 6 –º–æ–º–µ–Ω—Ç–æ–≤
  ]
}
```

**–û—Ü–µ–Ω–∫–∞**: ~3-5 —Å–µ–∫, ~$0.01-0.02

### 3.3. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∫–∞–¥—Ä–æ–≤ ‚Äî FFmpeg

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º–∫–æ–¥–∞ –∏–∑ —à–∞–≥–∞ 3.2:

```bash
ffmpeg -ss {timestamp} -i video.mp4 -frames:v 1 -q:v 2 frame_{index}.jpg
```

–ù–∞ Node.js:
```typescript
import { exec } from "child_process";

async function extractFrame(videoPath: string, timestamp: number, outputPath: string): Promise<void> {
  return new Promise((resolve, reject) => {
    exec(
      `ffmpeg -ss ${timestamp} -i "${videoPath}" -frames:v 1 -q:v 2 "${outputPath}"`,
      (error) => error ? reject(error) : resolve()
    );
  });
}

// –ò–∑–≤–ª–µ—á—å –≤—Å–µ –∫–∞–¥—Ä—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (~100ms –Ω–∞ –∫–∞–¥—Ä)
await Promise.all(moments.map((m, i) => 
  extractFrame(videoPath, m.timestamp, `/tmp/frame_${i}.jpg`)
));
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: `ffmpeg` –≤ Docker (`apk add ffmpeg` –≤ alpine).

### 3.4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∏–∫–µ—Ä–æ–≤ ‚Äî Gemini Image-to-Image

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤:

```
Model: gemini-2.5-flash-image / gemini-3-pro-image-preview
Input: frame_{index}.jpg (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–∞–¥—Ä)

Prompt:
  "Transform this photo into a sticker for a Telegram sticker pack.
   
   Character: {character_description}
   Style: {selected_style} (e.g. kawaii cartoon)
   Emotion: {emotion}
   Pose: {pose_description}
   
   CRITICAL RULES:
   - Keep EXACTLY the same pose, body position, and facial expression as in the photo
   - Keep the same person appearance (face shape, hair, clothing)
   - Style must be consistent: {selected_style} with bold outlines
   - Clean white/transparent background
   - Output: square format, character centered
   - Slightly exaggerate the expression for sticker effect
   - NO text on the sticker (text added separately)"

Output: PNG image
```

**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**:
```typescript
const stickerBuffers = await Promise.all(
  moments.map((moment, i) => 
    generateSticker(frameBuffers[i], moment, characterDescription, selectedStyle)
  )
);
```

**–û—Ü–µ–Ω–∫–∞**: 8 –≤—ã–∑–æ–≤–æ–≤ √ó ~10 —Å–µ–∫ = ~80 —Å–µ–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, **~15-20 —Å–µ–∫ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**.
**–°—Ç–æ–∏–º–æ—Å—Ç—å**: ~$0.02-0.05 –∑–∞ —Å—Ç–∏–∫–µ—Ä √ó 8 = ~$0.15-0.40 –∑–∞ –ø–∞–∫.

### 3.5. –ü–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Äî Sharp

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞:

```typescript
import sharp from "sharp";

async function processSticker(buffer: Buffer, text?: string): Promise<Buffer> {
  let img = sharp(buffer)
    .resize(512, 512, { fit: "contain", background: { r: 0, g: 0, b: 0, alpha: 0 } })
    .webp({ quality: 90 });
  
  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–≤–µ—Ä—Ö (–µ—Å–ª–∏ sticker_text –∑–∞–¥–∞–Ω)
  if (text) {
    // SVG overlay —Å —Ç–µ–∫—Å—Ç–æ–º
    const textSvg = buildTextOverlay(text, 512, 512);
    img = img.composite([{ input: Buffer.from(textSvg), blend: "over" }]);
  }
  
  return img.toBuffer();
}
```

### 3.6. –°–æ–∑–¥–∞–Ω–∏–µ Telegram Sticker Pack

```typescript
// 1. –°–æ–∑–¥–∞—Ç—å –ø–∞–∫ —Å –ø–µ—Ä–≤—ã–º —Å—Ç–∏–∫–µ—Ä–æ–º
await telegram.createNewStickerSet(
  userId,                                    // owner
  `video_${packId}_by_${botUsername}`,       // name
  `${userFirstName}'s Video Pack`,           // title
  [{ sticker: stickerBuffers[0], emoji_list: [emoji[0]] }],
  "static"                                   // sticker_type
);

// 2. –î–æ–±–∞–≤–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–∫–µ—Ä—ã
for (let i = 1; i < stickerBuffers.length; i++) {
  await telegram.addStickerToSet(
    userId,
    `video_${packId}_by_${botUsername}`,
    { sticker: stickerBuffers[i], emoji_list: [emojis[i]] }
  );
}

// 3. –í–µ—Ä–Ω—É—Ç—å —Å—Å—ã–ª–∫—É
const packUrl = `https://t.me/addstickers/video_${packId}_by_${botUsername}`;
```

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 4.1. –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
src/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ video-download.ts     # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ (Telegram / yt-dlp)
‚îÇ   ‚îú‚îÄ‚îÄ video-analysis.ts     # Gemini Video API: –∞–Ω–∞–ª–∏–∑ ‚Üí JSON —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ frame-extractor.ts    # FFmpeg: –≤–∏–¥–µ–æ ‚Üí jpg –∫–∞–¥—Ä—ã –ø–æ —Ç–∞–π–º–∫–æ–¥–∞–º
‚îÇ   ‚îî‚îÄ‚îÄ sticker-pack.ts       # Telegram API: createStickerSet + addStickerToSet
‚îú‚îÄ‚îÄ worker-video.ts           # –û—Ç–¥–µ–ª—å–Ω—ã–π –≤–æ—Ä–∫–µ—Ä –¥–ª—è –≤–∏–¥–µ–æ-–ø–∞–π–ø–ª–∞–π–Ω–∞
```

### 4.2. –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î

```sql
-- –ó–∞–¥–∞–Ω–∏—è –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤–∏–¥–µ–æ-–ø–∞–∫–æ–≤
CREATE TABLE video_pack_jobs (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id uuid NOT NULL REFERENCES users(id),
  session_id uuid REFERENCES sessions(id),
  status text DEFAULT 'pending',          -- pending, analyzing, extracting, generating, packing, done, failed
  video_source text NOT NULL,             -- 'telegram' | 'tiktok' | 'youtube'
  video_file_id text,                     -- Telegram file_id (–µ—Å–ª–∏ –≤–∏–¥–µ–æ)
  video_url text,                         -- URL (–µ—Å–ª–∏ —Å—Å—ã–ª–∫–∞)
  video_storage_path text,                -- –ø—É—Ç—å –≤ Supabase Storage
  selected_style text NOT NULL,           -- cartoon, sketch, kawaii, pixel, custom
  custom_style_text text,                 -- –µ—Å–ª–∏ selected_style = 'custom'
  -- –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞
  character_description text,
  analysis_json jsonb,                    -- –ø–æ–ª–Ω—ã–π JSON –æ—Ç Gemini
  moments_count int DEFAULT 8,
  -- –†–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  sticker_pack_name text,                 -- video_123_by_sticq_bot
  sticker_pack_url text,                  -- https://t.me/addstickers/...
  stickers_generated int DEFAULT 0,
  -- –ú–µ—Ç–∞
  credits_spent int DEFAULT 0,
  error_message text,
  env text DEFAULT 'prod',
  created_at timestamptz DEFAULT now(),
  completed_at timestamptz
);

-- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç–∏–∫–µ—Ä—ã –≤–Ω—É—Ç—Ä–∏ –ø–∞–∫–∞
CREATE TABLE video_pack_stickers (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  pack_job_id uuid NOT NULL REFERENCES video_pack_jobs(id),
  moment_index int NOT NULL,              -- 0-7
  timestamp_sec float,
  emotion text,
  sticker_text text,
  frame_storage_path text,                -- –ø—É—Ç—å –∫ –∫–∞–¥—Ä—É –≤ Storage
  sticker_storage_path text,              -- –ø—É—Ç—å –∫ —Å—Ç–∏–∫–µ—Ä—É –≤ Storage
  telegram_file_id text,                  -- file_id —Å—Ç–∏–∫–µ—Ä–∞ –≤ Telegram
  generation_time_ms int,
  created_at timestamptz DEFAULT now()
);
```

### 4.3. Session State

–ù–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è photo_session_state enum:

```sql
ALTER TYPE photo_session_state ADD VALUE 'wait_video';
ALTER TYPE photo_session_state ADD VALUE 'wait_video_style';
ALTER TYPE photo_session_state ADD VALUE 'processing_video';
```

### 4.4. Docker

```dockerfile
# Dockerfile.worker-video
FROM node:20-alpine

# FFmpeg –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–∞–¥—Ä–æ–≤
RUN apk add --no-cache ffmpeg

# yt-dlp –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ (—Ñ–∞–∑–∞ 2)
# RUN apk add --no-cache python3 && pip3 install yt-dlp

WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY tsconfig.json ./
COPY src ./src
RUN npm run build

CMD ["node", "dist/worker-video.js"]
```

## 5. –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ –ª–∏–º–∏—Ç—ã

### 5.1. –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –æ–¥–∏–Ω –ø–∞–∫

| –û–ø–µ—Ä–∞—Ü–∏—è | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|----------|-----------|
| Gemini Video Analysis | ~$0.02 |
| FFmpeg frame extraction | –±–µ—Å–ø–ª–∞—Ç–Ω–æ |
| 8√ó Gemini Image Generation | ~$0.20-0.40 |
| Supabase Storage | ~$0.001 |
| **–ò—Ç–æ–≥–æ** | **~$0.25-0.45** |

### 5.2. –ö—Ä–µ–¥–∏—Ç—ã

- –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Ü–µ–Ω–∞: **5 –∫—Ä–µ–¥–∏—Ç–æ–≤** –∑–∞ –≤–∏–¥–µ–æ-–ø–∞–∫ (vs 1 –∫—Ä–µ–¥–∏—Ç –∑–∞ –æ–±—ã—á–Ω—ã–π —Å—Ç–∏–∫–µ—Ä)
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: 8 —Å—Ç–∏–∫–µ—Ä–æ–≤ + –≤–∏–¥–µ–æ-–∞–Ω–∞–ª–∏–∑ = 5√ó –¥–æ—Ä–æ–∂–µ

### 5.3. –õ–∏–º–∏—Ç—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –õ–∏–º–∏—Ç |
|----------|-------|
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ | 60 —Å–µ–∫ max |
| –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ | 20 MB (Telegram) / 50 MB (yt-dlp) |
| –°—Ç–∏–∫–µ—Ä–æ–≤ –≤ –ø–∞–∫–µ | 8 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ 6 –∏–ª–∏ 12 |
| –ü–∞–∫–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –±–µ–∑ –ª–∏–º–∏—Ç–∞ (—Å –∫—Ä–µ–¥–∏—Ç–∞–º–∏) |
| –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π | 4 (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Gemini rate limit) |

## 6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

| –°–∏—Ç—É–∞—Ü–∏—è | –î–µ–π—Å—Ç–≤–∏–µ |
|----------|----------|
| –í–∏–¥–µ–æ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (>60—Å) | "–ü—Ä–∏—à–ª–∏ –≤–∏–¥–µ–æ –¥–æ 60 —Å–µ–∫—É–Ω–¥" |
| TikTok —Å—Å—ã–ª–∫–∞ –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è | "–ü—Ä–∏—à–ª–∏ –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é –≤ –±–æ—Ç" |
| Gemini –Ω–µ –Ω–∞—à—ë–ª –ª–∏—Ü–∞ –≤ –≤–∏–¥–µ–æ | "–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ ‚Äî –ø–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–µ –≤–∏–¥–µ–æ" |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 1 —Å—Ç–∏–∫–µ—Ä–∞ —É–ø–∞–ª–∞ | Retry 2 —Ä–∞–∑–∞, –µ—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ ‚Äî –ø–∞–∫ –∏–∑ 7 —Å—Ç–∏–∫–µ—Ä–æ–≤ |
| Telegram: –ø–∞–∫ —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç | –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–Ω–¥–æ–º–Ω—ã–π suffix |
| Gemini rate limit | –û—á–µ—Ä–µ–¥—å, retry —Å backoff |

## 7. –§–∞–∑—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1 ‚Äî MVP (5-6 –¥–Ω–µ–π)
- [ ] –ü—Ä–∏–Ω—è—Ç—å –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é –≤ –±–æ—Ç
- [ ] Gemini Video Analysis ‚Üí JSON —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏
- [ ] FFmpeg: –∏–∑–≤–ª–µ—á—å –∫–∞–¥—Ä—ã
- [ ] Gemini Image Generation: –∫–∞–¥—Ä ‚Üí —Å—Ç–∏–∫–µ—Ä (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
- [ ] Sharp: resize + WebP
- [ ] Telegram: createStickerSet
- [ ] –ë–∞–∑–æ–≤—ã–π UX: –≤—ã–±–æ—Ä —Å—Ç–∏–ª—è, progress, —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–∞–∫

### –§–∞–∑–∞ 2 ‚Äî –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (3-4 –¥–Ω—è)
- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∏–∫–µ—Ä–æ–≤ (Promise.all)
- [ ] –¢–µ–∫—Å—Ç–æ–≤—ã–µ overlay –Ω–∞ —Å—Ç–∏–∫–µ—Ä–∞—Ö
- [ ] –í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç–∏–∫–µ—Ä–æ–≤ (6/8/12)
- [ ] –ö—Ä–∞—Å–∏–≤—ã–π progress —Å –ø—Ä–µ–≤—å—é –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ç–æ–≤–æ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞

### –§–∞–∑–∞ 3 ‚Äî –°—Å—ã–ª–∫–∏ –Ω–∞ –≤–∏–¥–µ–æ (3-4 –¥–Ω—è)
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ TikTok URL
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ YouTube Shorts URL
- [ ] yt-dlp –≤ Docker
- [ ] Fallback –Ω–∞ API-—Å–µ—Ä–≤–∏—Å—ã
- [ ] –ü—Ä–æ–∫—Å–∏ –¥–ª—è TikTok

### –§–∞–∑–∞ 4 ‚Äî –í–∏—Ä–∞–ª—å–Ω–æ—Å—Ç—å (2-3 –¥–Ω—è)
- [ ] Watermark "Made with @sticq_bot" –Ω–∞ –ø–∞–∫–µ
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø–∞–∫–æ–º"
- [ ] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞: "–°–¥–µ–ª–∞–π —Å–≤–æ–π –ø–∞–∫ ‚Üí t.me/sticq_bot?start=videopack"
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞: —Å–∫–æ–ª—å–∫–æ –ø–∞–∫–æ–≤ —Å–æ–∑–¥–∞–Ω–æ, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–∞–∫ –æ—Ç–∫—Ä—ã–ª–∏

## 8. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- **–ö–æ–Ω–≤–µ—Ä—Å–∏—è**: % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞–ª–∏ –ø–∞–∫ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–∏–¥–µ–æ
- **–í–∏—Ä–∞–ª—å–Ω–æ—Å—Ç—å**: —Å—Ä–µ–¥–Ω–µ–µ —á–∏—Å–ª–æ –æ—Ç–∫—Ä—ã—Ç–∏–π –ø–∞–∫–∞ –¥—Ä—É–≥–∏–º–∏ –ª—é–¥—å–º–∏
- **Retention**: % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–π –ø–∞–∫
- **–°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è**: –µ—Å–ª–∏ –ø–∞–∫ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç 10 —á–µ–ª–æ–≤–µ–∫ ‚Üí CAC = $0.04/—á–µ–ª–æ–≤–µ–∫
